<nz-spin [nzSpinning]="isSpinning" [nzDelay]="500" class="defect-form">
  <div class="defect-report">
    <div class="header">
      <button
        *ngFor="let item of buttonArr"
        (click)="changeText(item)"
        [ngClass]="{ 'click-header': isclickText === item }"
      >
        {{ item }}
      </button>
    </div>
    <form
      [formGroup]="defectReportFormData"
      [style]="isclickText === '缺陷管理' ? '' : 'display: none;'"
      class="defect-report-form"
    >
      <label>
        <span class="title-label"> <span class="require">*</span> 主题</span>
        <input type="text" formControlName="motif" placeholder="请输入主题" />
      </label>
      <label>
        <span class="title-label"> <span class="require">*</span>发现时间</span>
        <input type="date" formControlName="findTheTime" />
      </label>
      <label
        ><span class="title-label"> <span class="require">*</span>发现人</span>
        <div class="selectDiv">
          <app-input-search
            [listData]="personOption"
            (selectValue)="getValueOfQuotId($event)"
          >
          </app-input-search>
        </div>
      </label>
      <label>
        <span class="title-label"> <span class="require">*</span>所属设备</span>
        <div class="selectDiv">
          <app-input-search
            [listData]="deviceOption"
            (selectValue)="getValueOfDevice($event)"
          >
          </app-input-search>
        </div>
      </label>
      <label>
        <span class="title-label"> <span class="require">*</span>缺陷编号</span>
        <input
          type="text"
          formControlName="number"
          placeholder="请输入缺陷编号"
        />
      </label>
      <label>
        <span class="title-label"><span class="require">*</span>缺陷类型</span>
        <div class="selectDiv">
          <app-input-search
            [listData]="deviceType"
            (selectValue)="getValueOfDeviceType($event)"
          >
          </app-input-search>
        </div>
      </label>

      <label>
        <span class="title-label"
          ><span class="require">*</span>下一执行人</span
        >
        <div class="selectDiv">
          <app-input-search
            [listData]="personOption"
            (selectValue)="getValueOfAssignee($event)"
          >
          </app-input-search>
        </div>
      </label>
      <label>
        <span class="title-label"><span class="require">*</span>缺陷等级</span>
        <div class="selectDiv">
          <app-input-search
            [listData]="defectLevelOption"
            (selectValue)="getValueOfLevel($event)"
          >
          </app-input-search>
        </div>
      </label>
      <label>
        <span class="title-label"
          ><span class="require">*</span> 是否是本设备缺陷</span
        >
        <button
          (click)="isDeviceDefect = 1"
          [ngClass]="{ 'click-defect': isDeviceDefect === 1 }"
        >
          是
        </button>
        <button
          (click)="isDeviceDefect = 0"
          [ngClass]="{ 'click-defect': isDeviceDefect === 0 }"
        >
          否
        </button>
      </label>
      <label style="height: 54px">
        <span class="title-label"><span class="require">*</span>缺陷描述</span>
        <textarea formControlName="describe"></textarea>
      </label>
      <label style="height: 52px; display: flex"
        ><span class="title-label">备注</span>
        <textarea formControlName="remark"></textarea>
      </label>
      <label (click)="photograph()">
        <div>
          拍照上传
          <i nz-icon nzType="camera" nzTheme="outline"></i>
        </div>
        <img
          [src]="image"
          alt=""
          style="max-width: 100%; height: 100%; margin-left: 1px"
        />
      </label>
      <!-- <div class="console">123</div> -->
      <button (click)="submitForm()" class="submit-btn">提交</button>
    </form>
    <div
      class="image"
      [style]="isclickText === '流程图' ? '' : 'display: none;'"
    >
      <img
        [src]="bpmnSrc"
        alt=""
        style="
          margin-left: -40%;
          margin-top: 22px;
          max-width: 515px;
          width: 140%;
        "
      />
    </div>
    <!-- 这里用ngif会出问题，所以用display -->
  </div>
</nz-spin>
